<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="UTF-8">
		<title>$title</title>
	</head>
	<body>
		<h3>$title</h3>
		$main
		<footer>Hello</footer>
		 <script type="text/javascript">
let socket = new WebSocket("ws://localhost:3501");

socket.onopen = function(e) {
	console.log("[open] Connection established");
};

socket.onmessage = function(event) {
	//alert(`[message] Data received from server: ${event.data}`);
	if(event.data === "reload") {
		location.reload();
	}
};

socket.onclose = function(event) {
	if (event.wasClean) {
		alert(`[close] Connection closed cleanly, code=${event.code} reason=${event.reason}`);
	} else {
		console.log('[close] Connection died');
	}
};

socket.onerror = function(error) {
	console.log(error);
};

/*
document.beforeunload = function() {
	socket.close();
};
*/
		</script>
	</body>
</html>
